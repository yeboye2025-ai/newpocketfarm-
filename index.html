<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PocketFarm</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
      background: #0d0f14;
      color: #e6e8ee;
    }
    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 16px;
    }
    h1 {
      text-align: center;
      font-size: 22px;
      margin-bottom: 16px;
    }
    .card {
      background: #151822;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .section-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .btn-primary,
    .btn-danger,
    .btn-secondary {
      width: 100%;
      height: 44px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }
    .btn-primary { background: #3ddc97; }
    .btn-danger { background: #ff6b6b; margin-bottom: 8px; }
    .btn-secondary { background: #2b2f3a; color: #e6e8ee; }
    .actions { display: flex; flex-direction: column; }
    .plot {
      background: #0f1220;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 8px;
      font-size: 13px;
    }
    .rank-item {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸŒ± PocketFarm</h1>

    <!-- E2 æ¯æ—¥ç­¾åˆ° -->
    <div class="card">
      <div class="section-title">æ¯æ—¥ç­¾åˆ° ğŸŒ</div>
      <div style="display:flex;align-items:center;justify-content:space-between;background:#121620;border-radius:12px;padding:12px 14px;margin-bottom:14px">
        <div>
          <div style="font-size:14px;font-weight:600">ä»Šæ—¥ç­¾åˆ°çŠ¶æ€</div>
          <div id="checkinStatus" style="font-size:12px;color:#9aa3b2">æœªç­¾åˆ°</div>
        </div>
        <button id="checkinBtn" class="btn-primary" style="width:88px">ç­¾åˆ°</button>
      </div>
    </div>

    <!-- æˆ‘çš„å†œåœº -->
    <div class="card">
      <div class="section-title">æˆ‘çš„å†œåœº</div>
      <div class="plot">ğŸ¥• èƒ¡èåœ Â· <span>æˆé•¿ä¸­</span></div>
      <div class="plot">ğŸ“ è‰è“ Â· <span>æˆé•¿ä¸­</span></div>
      <div class="plot">ğŸŒ½ ç‰ç±³ Â· <span>æˆé•¿ä¸­</span></div>
    </div>

    <!-- å·èœ & é˜²å®ˆ -->
    <div class="card">
      <div class="section-title">å»å·èœ ğŸ¥·</div>
      <div class="actions">
        <button class="btn-danger" id="stealBtn">å·å¥½å‹å†œåœº</button>
        <button class="btn-secondary" id="defenseBtn">å¼€å¯é˜²å®ˆ ğŸ›¡ï¸</button>
      </div>
      <div id="defenseStatus" style="margin-top:10px;font-size:12px;color:#9aa3b2">é˜²å®ˆæœªå¼€å¯</div>
    </div>

    <!-- æ’è¡Œæ¦œï¼ˆèµ›å­£ï¼‰ -->
    <div class="card">
      <div class="section-title">ğŸ† æœ¬å‘¨æ’è¡Œæ¦œ Â· Season 1</div>
      <div class="rank-item"><span>ğŸ¥‡ Farmer#A9</span><span>320</span></div>
      <div class="rank-item"><span>ğŸ¥ˆ Farmer#B2</span><span>295</span></div>
      <div class="rank-item"><span>ğŸ¥‰ Farmer#C1</span><span>270</span></div>
      <div class="rank-item"><span>You</span><span id="myScore">120</span></div>
    </div>
  </div>

  <script>
    // ========== E2 æ¯æ—¥ç­¾åˆ° ==========
    const today = new Date().toDateString();
    const lastCheckin = localStorage.getItem('pocketfarm_checkin');
    const checkinBtn = document.getElementById('checkinBtn');
    const checkinStatus = document.getElementById('checkinStatus');

    function updateCheckinUI() {
      if (lastCheckin === today) {
        checkinStatus.innerText = 'å·²ç­¾åˆ°ï¼Œä½œç‰©æ­£åœ¨æˆé•¿ ğŸŒ±';
        checkinBtn.disabled = true;
        checkinBtn.style.opacity = 0.6;
      }
    }
    updateCheckinUI();

    checkinBtn.onclick = () => {
      localStorage.setItem('pocketfarm_checkin', today);
      checkinStatus.innerText = 'ç­¾åˆ°æˆåŠŸï¼ä½œç‰©æˆé•¿ +1 ğŸŒ¿';
      checkinBtn.disabled = true;
      checkinBtn.style.opacity = 0.6;
      document.querySelectorAll('.plot span').forEach(p => p.innerText = 'å³å°†æˆç†Ÿ');
    };

    // ========== C1 + D2 å·èœ & è¿èƒœ ==========
    let streak = parseInt(localStorage.getItem('pocketfarm_streak') || '0');
    document.getElementById('stealBtn').onclick = () => {
      const success = Math.random() > 0.4;
      if (success) {
        streak += 1;
        localStorage.setItem('pocketfarm_streak', streak);
        alert(`âœ… å·èœæˆåŠŸï¼è¿èƒœ ${streak} æ¬¡`);
      } else {
        streak = 0;
        localStorage.setItem('pocketfarm_streak', '0');
        alert('âŒ è¢«å‘ç°äº†ï¼Œè¿èƒœä¸­æ–­');
      }
    };

    // ========== F1 é˜²å®ˆç³»ç»Ÿ ==========
    const defenseBtn = document.getElementById('defenseBtn');
    const defenseStatus = document.getElementById('defenseStatus');
    let defenseUntil = parseInt(localStorage.getItem('pocketfarm_defense_until') || '0');

    function updateDefenseUI() {
      const now = Date.now();
      if (defenseUntil > now) {
        const mins = Math.ceil((defenseUntil - now) / 60000);
        defenseStatus.innerText = `ğŸ›¡ï¸ é˜²å®ˆä¸­ï¼Œå‰©ä½™ ${mins} åˆ†é’Ÿ`;
        defenseBtn.disabled = true;
        defenseBtn.style.opacity = 0.6;
      }
    }
    updateDefenseUI();

    defenseBtn.onclick = () => {
      defenseUntil = Date.now() + 60 * 60 * 1000;
      localStorage.setItem('pocketfarm_defense_until', defenseUntil);
      updateDefenseUI();
      alert('ğŸ›¡ï¸ é˜²å®ˆå·²å¼€å¯ 1 å°æ—¶');
    };

    // ========== è¢«å·æé†’ ==========
    const lastAlert = localStorage.getItem('pocketfarm_last_alert');
    if (lastAlert !== today && Math.random() > 0.5) {
      setTimeout(() => {
        alert('ğŸš¨ ä½ çš„ ğŸ“ è¢« Farmer#C9 å·èµ°äº†ï¼');
        localStorage.setItem('pocketfarm_last_alert', today);
      }, 1200);
    }
  </script>
</body>
</html>
